# プロダクト要求定義書 (Product Requirements Document)

## プロダクト概要

### 名称
**Daily AI News English Gym** - AIニュースで鍛える英語スピーキング習慣

### プロダクトコンセプト
- **毎日10〜15分で完結**: 忙しい日常の中でも続けられる短時間設計
- **自分専用・非公開**: 恥ずかしさゼロで失敗を恐れずに話せる環境
- **AIニュースで学ぶ**: 興味のあるトピックで「理解できる → 自分の意見を英語で話せる」状態を実現

### プロダクトビジョン
AI/ITニュースを題材に、毎日10〜15分の英語スピーキング練習を習慣化する自分専用アプリ。
ニュースを「読む・聞く」だけでなく、「自分の言葉で話す」ことで実践的な英語力を身につける。
AIによる即時フィードバックで、自然な英語表現とIT業界で通用する言い回しを効率的に習得できる。
競争要素を排除し、継続することを最優先とした設計で、無理なく学習習慣を定着させる。

### 目的
- 毎日のAI/ITニュースを英語で理解し、自分の言葉で説明できるようになる
- 英語スピーキングの習慣を継続的に形成する
- IT業界で使える自然な英語表現を身につける
- AIによるフィードバックで効率的に表現力を向上させる

## ターゲットユーザー

### プライマリーペルソナ: 自分自身（IT業界で働くエンジニア）
- **背景**: 日常的にAI/IT関連の英語記事を読むが、スピーキングの機会が少ない
- **技術スタック**: Vue.js、TypeScript、Node.jsに精通。ターミナルとエディタ中心の開発環境
- **現在の課題**:
  - 英語を「読む」ことはできるが「話す」経験が不足している
  - 外部の英会話サービスは続かない（恥ずかしさ、時間の制約）
  - AI/IT関連の専門的な英語表現を身につけたい
- **期待する解決策**:
  - 自分だけの環境で気軽に英語を話す練習ができる
  - 短時間で完結し、毎日続けられる仕組み
  - AIによる的確なフィードバックで効率的に上達
- **1日の典型的なワークフロー**:
  - 朝または昼休みにAI/ITニュースをチェック
  - 気になった記事を1本選び、10〜15分の学習セッションを実施
  - フィードバックを確認し、修正版を音読して終了

## 成功指標(KPI)

### プライマリーKPI
- **継続日数**: 週5日以上の学習を4週間維持（1ヶ月後）
- **セッション完了率**: 開始したセッションの90%以上を最後まで完了
- **1セッションの所要時間**: 10〜15分以内に収まる

### セカンダリーKPI
- **週間サマリー確認率**: 毎週のサマリーを確認する（週1回）
- **表現の改善度**: フィードバックで指摘された表現パターンの改善（主観的評価）

## 機能要件

### コア機能(MVP) - Phase 1

#### 1. ニュース入力機能

**ユーザーストーリー**:
ユーザーとして、学習したいAI/ITニュースを簡単に入力するために、テキストまたはURLで記事を登録したい

**受け入れ条件**:
- [ ] テキストエリアに記事本文を直接貼り付けできる
- [ ] 入力後「学習開始」ボタンで次のフェーズに進める
- [ ] 空の入力では学習を開始できない（バリデーション）

**優先度**: P0(必須)

#### 2. 3段階テキスト生成機能（Understand）

**ユーザーストーリー**:
ユーザーとして、ニュースの内容を段階的に理解するために、難易度別の3つのバージョンのテキストを見たい

**受け入れ条件**:
- [ ] OpenAI APIを使用してLevel 1（超平易な英語）を生成できる
- [ ] OpenAI APIを使用してLevel 2（スピーキング用の整理された英語）を生成できる
- [ ] Level 3として原文をそのまま表示できる
- [ ] 3つのレベルをタブまたはボタンで切り替えて表示できる
- [ ] 生成中はローディング表示を出す

**優先度**: P0(必須)

#### 3. TTS音声再生機能（Understand）

**ユーザーストーリー**:
ユーザーとして、正しい発音を聞いてから話すために、Level 2テキストの音声を再生したい

**受け入れ条件**:
- [ ] GPT-4o mini TTSを使用してLevel 2テキストを音声化できる
- [ ] 再生/停止ボタンで音声を制御できる
- [ ] 再生速度のデフォルトは0.8倍
- [ ] 再生速度を0.5倍〜1.5倍の範囲で調整できる

**優先度**: P0(必須)

#### 4. スピーキング質問生成機能（Speak）

**ユーザーストーリー**:
ユーザーとして、即興で英語を話す練習をするために、ニュースに関連した質問を1つ出題してほしい

**受け入れ条件**:
- [ ] OpenAI APIを使用してニュース内容に基づいた質問を1つ生成できる
- [ ] 質問は「自分の言葉で説明する」または「意見を述べる」形式
- [ ] 質問は画面に大きく表示される
- [ ] 質問例: "Explain this news in your own words in 30 seconds." / "What do you think is the most important impact of this news?"

**優先度**: P0(必須)

#### 5. 音声録音機能（Speak）

**ユーザーストーリー**:
ユーザーとして、自分のスピーキングを記録するために、ブラウザ上で音声を録音したい

**受け入れ条件**:
- [ ] 録音開始/停止ボタンで音声を録音できる
- [ ] 録音中は経過時間（タイマー）を表示する
- [ ] 録音時間の目安（30〜45秒）を表示する
- [ ] 録音した音声をその場で再生確認できる
- [ ] 録音データはwebm形式でローカルに一時保存される

**優先度**: P0(必須)

#### 6. 音声文字起こし機能（Reflect）

**ユーザーストーリー**:
ユーザーとして、自分が話した内容を確認するために、録音音声をテキストに変換してほしい

**受け入れ条件**:
- [ ] GPT-4o mini Transcribeを使用して音声をテキストに変換できる
- [ ] 文字起こし結果を画面に表示できる
- [ ] 処理中はローディング表示を出す

**優先度**: P0(必須)

#### 7. フィードバック生成機能（Reflect）

**ユーザーストーリー**:
ユーザーとして、自分の英語を改善するために、AIからフィードバックを受けたい

**受け入れ条件**:
- [ ] OpenAI APIを使用して以下の3つを生成:
  - corrected: 意味を保ったまま自然な英語に修正
  - upgraded: IT業界らしい表現に引き上げ
  - comment: 日本語で1〜2行の解説
- [ ] 元の発話（spoken）と修正版を並べて表示できる
- [ ] 修正箇所がわかりやすく強調表示される

**優先度**: P0(必須)

#### 8. ログ保存機能

**ユーザーストーリー**:
ユーザーとして、学習の記録を残すために、セッション内容をログとして保存したい

**受け入れ条件**:
- [ ] 学習完了時に自動でMarkdownファイルとして保存される
- [ ] 保存先: `/logs/YYYY-MM/YYYY-MM-DD.md`
- [ ] 保存内容: 日付、ニュースタイトル、自分の発話（原文）、修正版、コメント
- [ ] 同じ日に複数回学習した場合は追記される

**優先度**: P0(必須)

### 拡張機能 - Phase 2

#### 9. URL入力による記事自動取得

**ユーザーストーリー**:
ユーザーとして、記事をコピペする手間を省くために、URLから本文を自動取得したい

**受け入れ条件**:
- [ ] URLを入力すると記事本文を自動取得できる
- [ ] 取得に失敗した場合はエラーメッセージを表示し、テキスト入力にフォールバック

**優先度**: P1(重要)

#### 10. 音声ファイル永久保存

**ユーザーストーリー**:
ユーザーとして、過去の自分の発話を振り返るために、音声ファイルを永久保存したい

**受け入れ条件**:
- [ ] 録音した音声を `/logs/YYYY-MM/YYYY-MM-DD-audio.webm` として保存
- [ ] ログファイルから音声ファイルへのリンクを参照できる

**優先度**: P1(重要)

#### 11. 履歴画面

**ユーザーストーリー**:
ユーザーとして、過去の学習を振り返るために、履歴一覧を確認したい

**受け入れ条件**:
- [ ] 過去のログ一覧を日付順で表示できる
- [ ] 特定の日付のログ詳細を表示できる
- [ ] 月別でフィルタリングできる

**優先度**: P1(重要)

### 継続支援機能 - Phase 3

#### 12. 週間サマリー

**ユーザーストーリー**:
ユーザーとして、学習の進捗を把握するために、週間サマリーを確認したい

**受け入れ条件**:
- [ ] 今週の学習日数を表示
- [ ] 扱ったニューストピック一覧を表示
- [ ] よく使った表現・改善が必要な表現をOpenAI APIで分析・表示
- [ ] 来週への一言アドバイスを生成・表示

**優先度**: P2(できれば)

#### 13. 連続日数カウント

**ユーザーストーリー**:
ユーザーとして、モチベーションを維持するために、連続学習日数を確認したい

**受け入れ条件**:
- [ ] ホーム画面に連続学習日数を表示
- [ ] 連続記録が途切れた場合はリセット

**優先度**: P2(できれば)

### UIインターフェース

```
[ホーム画面]
├── 今日の学習開始ボタン
├── 連続日数表示（Phase 3）
└── 週間サマリーへのリンク（Phase 3）

[入力画面]
├── URL入力フィールド（Phase 2）
├── テキスト入力エリア
└── 学習開始ボタン

[理解画面（Understand）]
├── Level 1/2/3 タブ切り替え
├── テキスト表示エリア
├── 音声再生コントロール（Level 2のみ）
└── 次へボタン

[スピーキング画面（Speak）]
├── 質問表示
├── 録音ボタン
├── タイマー表示
└── 録音再生・次へボタン

[フィードバック画面（Reflect）]
├── 文字起こし結果（spoken）
├── 修正版（corrected）
├── IT表現版（upgraded）
├── 解説コメント
└── 完了ボタン

[履歴画面]（Phase 2）
├── 月別フィルター
├── ログ一覧
└── ログ詳細表示
```

### APIエンドポイント

| メソッド | パス | 用途 | Phase |
|---------|------|------|-------|
| POST | /api/news/parse | URL/テキストから記事解析 | 1 |
| POST | /api/text/generate-levels | Level 1/2/3テキスト生成 | 1 |
| POST | /api/tts/generate | TTS音声生成 | 1 |
| POST | /api/speaking/question | スピーキング質問生成 | 1 |
| POST | /api/speech/transcribe | 音声文字起こし | 1 |
| POST | /api/feedback/generate | フィードバック生成 | 1 |
| POST | /api/log/save | ログ保存 | 1 |
| GET | /api/log/list | ログ一覧取得 | 2 |
| GET | /api/log/:date | 特定日のログ取得 | 2 |
| GET | /api/summary/weekly | 週間サマリー取得 | 3 |

## 非機能要件

### パフォーマンス
- **API応答時間**: OpenAI API呼び出しを除き、各エンドポイントは500ms以内に応答
- **音声生成**: TTS生成は5秒以内に開始（ストリーミング対応）
- **文字起こし**: 1分以内の音声は10秒以内に処理完了

### ユーザビリティ
- **学習時間**: 1セッション10〜15分以内で完了できる設計
- **操作性**: 各フェーズで次のアクションが明確にわかるUI
- **言語**: UI表示は日本語のみ

### 信頼性
- **データ保存**: ログは必ずローカルに保存され、データ損失なし
- **エラーハンドリング**: API呼び出し失敗時は適切なエラーメッセージを表示
- **再試行**: API失敗時は1回自動リトライ

### セキュリティ
- **APIキー管理**: 環境変数で管理、クライアントには露出しない
- **ローカル専用**: インターネットに公開しない前提

### スケーラビリティ
- **シングルユーザー**: スケーラビリティは考慮不要（自分専用）
- **ログ容量**: 年間約365ファイル + 音声ファイル（約10GB/年想定）

## スコープ外

明示的にスコープ外とする項目:
- **アカウント機能**: シングルユーザーのため認証・認可は不要
- **データベース**: Markdown + ファイルベースで十分
- **外部公開**: ローカル専用のため、デプロイ・ホスティングは対象外
- **オフライン動作**: API依存のため、オフラインでの動作はサポートしない
- **モバイル対応**: デスクトップブラウザ（Chrome）のみ対象
- **多言語対応**: 日本語UIのみ
- **複数ニュース同時処理**: 1セッション1ニュースのみ
