# Daily AI News English Gym - 初期要件定義

## 1. アプリ概要

### 目的
> 今日のAI / ITニュース1本を使って、「理解できる → 自分の意見を英語で話せる」状態を毎日つくる

### コンセプト
- 公開しない（自分専用）
- 競わない
- 続けること最優先
- 1日10〜15分で完結

---

## 2. 技術スタック

| カテゴリ | 技術 | 備考 |
|---------|------|------|
| フロントエンド | Vue.js | ローカルWebアプリ |
| バックエンド | Hono | TypeScript対応、軽量 |
| ランタイム | Node.js v24 | |
| 言語 | TypeScript 5.x | |
| LLM | OpenAI API (GPT-5.2) | 要約・翻訳・フィードバック |
| 音声認識 | GPT-4o mini Transcribe | 文字起こし |
| 音声合成 | GPT-4o mini TTS | Level 2テキストの読み上げ |
| データ保存 | ローカルMarkdown | ログ保存 |
| 起動方法 | `npm run dev` | ローカルサーバー |

---

## 3. 学習フロー

```
Input（ニュース入力）
  ↓
Understand（読む・聞く）← 3分
  ↓
Speak（話す）← 5分 ★中核
  ↓
Reflect（修正・定着）← 5分
```

---

## 4. 機能詳細

### 4.1 ニュース入力（Input）

**入力方法**: 手動入力（2パターン対応）
1. **URL貼り付け**: 記事URLを入力 → 本文を自動取得
2. **テキスト貼り付け**: 記事本文を直接コピペ

**自動処理**（OpenAI APIで実行）
- 原文取得（URLの場合）
- 要点抽出
- 翻訳（比較用・表示は任意）

---

### 4.2 理解フェーズ（Understand）- 3分

**3段階のテキスト生成**（すべてOpenAI APIで生成）

| レベル | 用途 | 説明 |
|--------|------|------|
| Level 1 | 内容把握 | 超平易な英語（中学英語レベル） |
| Level 2 | 話す準備 | 整理された英語（スピーキング用） |
| Level 3 | 参考 | 原文そのまま |

**音声機能**
- Level 2テキストをTTS（OpenAI TTS API）で音声化
- 再生速度: 0.8倍をデフォルト

---

### 4.3 話すフェーズ（Speak）- 5分 ★最重要

#### Step 1: 音読（ウォームアップ）
- Level 2を1回音読
- 正確さより「止まらない」を優先

#### Step 2: 即興スピーキング（メイン）

**AIが1問だけ出題**（固定構造の質問）

例:
> "Explain this news in your own words in 30 seconds."

または
> "What do you think is the most important impact of this news?"

**ルール**
- 録音する（ローカル保存）
- 台本なし
- 30〜45秒
- 失敗OK（自分専用なので）

---

### 4.4 フィードバックフェーズ（Reflect）- 5分

**処理フロー**
1. **文字起こし**（GPT-4o mini Transcribe）
2. **意味はそのままで自然な英語に修正**（OpenAI API）
3. **IT業界らしい表現に1段引き上げ**（OpenAI API）
4. **日本語で1〜2行だけ解説**（OpenAI API）

**出力形式**
```json
{
  "spoken": "録音から文字起こしした内容",
  "corrected": "修正後の自然な英語",
  "upgraded": "IT業界向けの表現に引き上げた英語",
  "comment": "ここは 'impact' より 'implication' が自然です"
}
```

**仕上げ（再スピーキング）**
- 修正版をもう1回音読
- 「今日はこれで終了」

---

### 4.5 ログ保存

**保存先**: ローカルMarkdownファイル

**保存内容**
- 日付
- ニュースタイトル
- ニュースURL（あれば）
- 自分の話した英語（原文）
- AI修正版
- 音声ファイル（永久保存）

**ファイル構成例**
```
/logs
  /2025-01
    /2025-01-21.md
    /2025-01-21-audio.webm
  /2025-02
    ...
```

---

### 4.6 継続支援機能

**週間サマリー**
- 週に1回、学習の振り返りを表示
- 内容例:
  - 今週の学習日数
  - 扱ったニューストピック一覧
  - よく使った表現・改善が必要な表現
  - 来週への一言アドバイス

---

## 5. UI要件

**言語**: 日本語のみ

**画面構成**（想定）
1. **ホーム画面**: 今日の学習開始ボタン、連続日数表示
2. **入力画面**: URL/テキスト入力フォーム
3. **理解画面**: Level 1/2/3のテキスト表示、音声再生
4. **スピーキング画面**: 質問表示、録音ボタン、タイマー
5. **フィードバック画面**: 文字起こし・修正・解説の表示
6. **履歴画面**: 過去のログ一覧
7. **週間サマリー画面**: 週次の振り返り

---

## 6. MVP開発計画

**段階的に実装**

### Phase 1: コア機能（最小限で動くもの）
- [ ] テキスト入力 → Level 1/2/3生成
- [ ] Level 2のTTS再生
- [ ] 質問生成
- [ ] 録音 → 文字起こし
- [ ] フィードバック生成
- [ ] ログ保存（Markdown）

### Phase 2: 拡張機能
- [ ] URL入力 → 記事本文自動取得
- [ ] 音声ファイル永久保存
- [ ] 履歴画面

### Phase 3: 継続支援
- [ ] 週間サマリー生成・表示
- [ ] 連続日数カウント

---

## 7. API設計（概要）

### エンドポイント案

| メソッド | パス | 用途 |
|---------|------|------|
| POST | /api/news/parse | URL/テキストから記事解析 |
| POST | /api/text/generate-levels | Level 1/2/3テキスト生成 |
| POST | /api/tts/generate | TTS音声生成 |
| POST | /api/speaking/question | スピーキング質問生成 |
| POST | /api/speech/transcribe | 音声文字起こし |
| POST | /api/feedback/generate | フィードバック生成 |
| POST | /api/log/save | ログ保存 |
| GET | /api/log/list | ログ一覧取得 |
| GET | /api/log/:date | 特定日のログ取得 |
| GET | /api/summary/weekly | 週間サマリー取得 |

---

## 8. 環境変数

```env
OPENAI_API_KEY=xxx          # GPT-5.2 + GPT-4o mini Transcribe + GPT-4o mini TTS
PORT=3000                   # サーバーポート
LOG_DIR=./logs              # ログ保存先
AUDIO_DIR=./audio           # 音声保存先
```

---

## 9. 制約事項

- アカウント機能なし（シングルユーザー）
- データベース不要（Markdown + ファイルベース）
- 外部公開しない（ローカル専用）
- オフライン動作は非対応（API依存）
